<!DOCTYPE html>
<html>
  <head>
    
  <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="description"/>
    <meta name="author" content="author" />
    <meta name="keywords" content="keywords" />
    <link rel="stylesheet" href="./stylesheet.css" type="text/css" />
    
    <link rel="stylesheet" href="./sounds/styles.css" type="text/css" />
    <style type="text/css">body { background:#000; }</style>
  </head>
  <body>
    <script src="jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript">
function randInt(min, max) {  return Math.floor(Math.random() * (max - min + 1) + min) }
      
      
$(document).keypress(function(e) {
  if(e.key == "q"){ window.open("bedroom/index.html", "", `popup,left=${randInt(0,2000)},top=${randInt(0,1000)},width=150,height=150`); }
  
  if(e.key == "w"){ window.open("moving", "", `popup,left=${randInt(0,2000)},top=${randInt(0,1000)},width=150,height=150`); }
  
  if(e.key == "e"){ window.open("ads", "", `popup,left=${randInt(0,2000)},top=${randInt(0,1000)},width=150,height=150`); }
  
  if(e.key == "r"){ window.open("forms", "", `popup,left=${randInt(0,2000)},top=${randInt(0,1000)},width=150,height=150`); }
  
  if(e.key == "t"){ window.open("birds", "", `popup,left=${randInt(0,2000)},top=${randInt(0,1000)},width=150,height=150`); }
  
  if(e.key == "y"){ window.open("tryst", "", `popup,left=${randInt(0,2000)},top=${randInt(0,1000)},width=150,height=150`); }
  
  if(e.key == "i"){ window.open("crucifixion", "", `popup,left=${randInt(0,2000)},top=${randInt(0,1000)},width=150,height=150`); }
  
  if(e.key == "o"){ window.open("annunciation", "", `popup,left=${randInt(0,2000)},top=${randInt(0,1000)},width=150,height=150`); }
  
  if(e.key == "p"){ window.open("data", "", `popup,left=${randInt(0,2000)},top=${randInt(0,1000)},width=150,height=150`); }
  
  // play sounds here
  
  if(e.key == "a"){ sfx("sounds/glitch-1.wav", 3); }
  if(e.key == "s"){ sfx("sounds/atm_ice.wav", 5); }
  if(e.key == "d"){ sfx("sounds/atm_dreamybuzz.wav", 2); }
  if(e.key == "f"){ sfx("sounds/atm_alarm.wav", 2); }
  if(e.key == "g"){ sfx("sounds/atm_cassette.wav", 2); }
  if(e.key == "h"){ sfx("sounds/atm_movies.wav", 2); }
  if(e.key == "j"){ sfx("sounds/aquarium.wav", 1); }
  if(e.key == "k"){ sfx("sounds/tryst-1.wav", 1); }
  if(e.key == "l"){ sfx("sounds/bliss.wav", 1); }
  if(e.key == "z"){ sfx("sounds/water_surf_ph.wav", 1); }
  if(e.key == "x"){ sfx("sounds/snow_steps.wav", 1); }
  if(e.key == "c"){ sfx("sounds/atmosphere_birds.wav", 1); }
  if(e.key == "m"){ sfx("sounds/curvesofair-1.mp3", 2); }
  if(e.key == "n"){ sfx("sounds/lochraven1.mp3", 1); }
  
  
});
    
    </script>
    
    

    <!--     SOUNDS -->
    
    <div id="sounds"><button id="startButton">Start Audio</button> <!-- User interaction button -->
    <div id="sliders" style="display:none;">
        <!-- Create 16 sliders -->
        <div class="slider-container">
            <label for="slider1">Slider 1</label>
            <input type="range" id="slider1" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider2">Slider 2</label>
            <input type="range" id="slider2" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider3">Slider 3</label>
            <input type="range" id="slider3" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider4">Slider 4</label>
            <input type="range" id="slider4" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider5">Slider 5</label>
            <input type="range" id="slider5" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider6">Slider 6</label>
            <input type="range" id="slider6" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider7">Slider 7</label>
            <input type="range" id="slider7" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider8">Slider 8</label>
            <input type="range" id="slider8" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider9">Slider 9</label>
            <input type="range" id="slider9" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider10">Slider 10</label>
            <input type="range" id="slider10" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider11">Slider 11</label>
            <input type="range" id="slider11" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider12">Slider 12</label>
            <input type="range" id="slider12" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider13">Slider 13</label>
            <input type="range" id="slider13" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider14">Slider 14</label>
            <input type="range" id="slider14" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider15">Slider 15</label>
            <input type="range" id="slider15" min="0" max="127" value="0">
        </div>
        <div class="slider-container">
            <label for="slider16">Slider 16</label>
            <input type="range" id="slider16" min="0" max="127" value="0">
        </div>
    </div>
    <div id="ascii-oscilloscope" style="font-family: monospace; white-space: pre;"></div>
  </div>
    
      <script src="sounds/midi-controller.js"></script>
    <script src="sounds/sound-generator.js"></script>
    <script src="sounds/oscilloscope.js"></script>

 <script>
    const soundGenerator = new SoundGenerator(16);
    const soundFiles = [
        'sounds/aircon.mp3', 'sounds/jeepney.mp3', 'sounds/jeepney-convo.wav', 'sounds/typing.mp3',
        'sounds/kitchen.wav', 'sounds/haze.wav', 'sounds/sky.mp3', 'sounds/dream.wav',
        'sounds/air.mp3', 'sounds/atmos_neighborhood.wav', 'sounds/pikunin.mp3', 'sounds/karaoke/myway.mp3',
        'sounds/karaoke/bakitpa.mp3', 'sounds/karaoke/oo.mp3', 'sounds/karaoke/panalangin.mp3', 'sounds/karaoke/beer.mp3'
    ];

    const midiController = new MidiController(
        16,
        (index, value) => soundGenerator.setVolume(index, value), // Callback for sine waves
        (index, value) => {} // Callback for audio files (handled within MidiController)
    );

    function initializeAudioAndMIDI() {
        soundGenerator.initialize();
        midiController.initialize(soundFiles);

        const oscilloscope = new Oscilloscope(soundGenerator.audioContext, soundGenerator.filterNode);
        oscilloscope.initialize('ascii-oscilloscope');

        document.getElementById('startButton').style.display = 'none';
        document.removeEventListener('click', initializeAudioAndMIDI);
    }

    document.addEventListener('click', initializeAudioAndMIDI);
   
   
   
function sfx(audioPath, loops = 1) {
    let audio = new Audio(audioPath);
    audio.loop = loops > 1; 

    audio.volume = 0;

    $('body').append(audio);

    let fadeInInterval = setInterval(() => {
        if (audio.volume < 1) {
            audio.volume = Math.min(audio.volume + 0.01, 1);
        } else {
            clearInterval(fadeInInterval);
        }
    }, 50);

    audio.play();

  
    audio.addEventListener('timeupdate', function() {
        if (audio.currentTime > audio.duration - 4) { 
            let fadeOutInterval = setInterval(() => {
                if (audio.volume > 0) {
                    audio.volume = Math.max(audio.volume - 0.005, 0);
                } else {
                    clearInterval(fadeOutInterval);
                    audio.pause();
                    audio.remove();
                }
            }, 50); 
        }
    });

    // For looping: reset the time and reduce the loop count after each loop
    audio.addEventListener('ended', function() {
        if (--loops > 0) {
            audio.currentTime = 0;
            audio.play();
        } else {
            audio.remove();
        }
    });
}
</script>

  </body>
</html>